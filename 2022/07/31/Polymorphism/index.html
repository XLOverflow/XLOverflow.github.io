<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Polymorphism | Life is not a race, but a journey</title><meta name="author" content="Xiang Li"><meta name="copyright" content="Xiang Li"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="C++ Polymorphism">
<meta property="og:type" content="article">
<meta property="og:title" content="Polymorphism">
<meta property="og:url" content="https://xloverflow.github.io/2022/07/31/Polymorphism/index.html">
<meta property="og:site_name" content="Life is not a race, but a journey">
<meta property="og:description" content="C++ Polymorphism">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-aa2b0445c8d4db32c0e021608da2a7fc_1440w.jpeg">
<meta property="article:published_time" content="2022-07-31T19:33:50.000Z">
<meta property="article:modified_time" content="2025-09-09T23:59:31.463Z">
<meta property="article:author" content="Xiang Li">
<meta property="article:tag" content="Study Notes">
<meta property="article:tag" content="C++ Programming">
<meta property="article:tag" content="C++ Language">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic1.zhimg.com/80/v2-aa2b0445c8d4db32c0e021608da2a7fc_1440w.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Polymorphism",
  "url": "https://xloverflow.github.io/2022/07/31/Polymorphism/",
  "image": "https://pic1.zhimg.com/80/v2-aa2b0445c8d4db32c0e021608da2a7fc_1440w.jpeg",
  "datePublished": "2022-07-31T19:33:50.000Z",
  "dateModified": "2025-09-09T23:59:31.463Z",
  "author": [
    {
      "@type": "Person",
      "name": "Xiang Li",
      "url": "https://xloverflow.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://xloverflow.github.io/2022/07/31/Polymorphism/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Polymorphism',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://pica.zhimg.com/80/v2-b6830c2136b7784c0aba649af7ec2867_1440w.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> Album</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fas fa-video"></i><span> Videos</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movies</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> Books</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://pic1.zhimg.com/80/v2-aa2b0445c8d4db32c0e021608da2a7fc_1440w.jpeg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Life is not a race, but a journey</span></a><a class="nav-page-title" href="/"><span class="site-name">Polymorphism</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> Album</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fas fa-video"></i><span> Videos</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i><span> Movies</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> Books</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Polymorphism</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-07-31T19:33:50.000Z" title="Created 2022-07-31 15:33:50">2022-07-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-09-09T23:59:31.463Z" title="Updated 2025-09-09 19:59:31">2025-09-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CS-Study-Notes/">CS Study Notes</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Polymorphism-Overview"><a href="#Polymorphism-Overview" class="headerlink" title="Polymorphism Overview"></a>Polymorphism Overview</h1><p>Polymorphism refers to different behaviors when the same message is received by different types of objects. A message refers to <strong>calls to class member functions</strong>, and different behaviors refer to different implementations, which is <strong>calling different functions</strong>.</p>
<p>The simplest example is the <strong>“+”</strong> operator, which can implement addition between integers, floating-point numbers, and double-precision floating-point numbers, including mixed-type addition. The same “+” message, when received by different types of objects, uses different methods for addition operations. This is polymorphism.</p>
<h2 id="Types-of-Polymorphism"><a href="#Types-of-Polymorphism" class="headerlink" title="Types of Polymorphism"></a>Types of Polymorphism</h2><p>Object-oriented polymorphism can be divided into four categories:</p>
<ul>
<li>Overloading Polymorphism</li>
<li>Coercion Polymorphism</li>
<li>Inclusion Polymorphism</li>
<li>Parametric Polymorphism</li>
</ul>
<p>The first two are called <strong>ad-hoc polymorphism</strong>, and the latter two are called <strong>universal polymorphism</strong>.</p>
<ol>
<li>Overloading polymorphism refers to the overloading of ordinary functions and class member functions learned before, and of course includes <strong>operator overloading</strong>.</li>
<li>Coercion polymorphism, simply put, is when <strong>+</strong> involves mixed types, it will perform type coercion, which is an instance of coercion polymorphism.</li>
<li>Inclusion polymorphism mainly refers to the polymorphic behavior of member functions with the same name defined in different classes in a class hierarchy, implemented through <strong>virtual functions</strong>.</li>
<li>Parametric polymorphism is associated with class templates and must be given actual types when used to be instantiated.</li>
</ol>
<p>This article will introduce operator overloading and virtual functions.</p>
<h2 id="Implementation-of-Polymorphism"><a href="#Implementation-of-Polymorphism" class="headerlink" title="Implementation of Polymorphism"></a>Implementation of Polymorphism</h2><p>Polymorphism can be divided into two categories from an implementation perspective: <strong>compile-time polymorphism and runtime polymorphism</strong>. The former, as the name suggests, determines the specific operation object of the same-named operation during compilation. This process of determining the specific object of an operation is called <strong>binding</strong>.</p>
<p>Binding refers to the process of associating computer programs with each other, the process of <strong>connecting an identifier with a storage address</strong>. In object-oriented terms, it is the process of combining a message with an object’s method.</p>
<p>Binding is also divided into two types: <strong>static binding</strong> and <strong>dynamic binding</strong>.</p>
<p>When binding is completed during the compilation and linking phase, it is called <strong>static binding</strong>. Also known as early binding.</p>
<p>With static binding, <strong>dynamic binding</strong>, as the name suggests, is binding completed during program execution. Also known as late binding. It corresponds to runtime polymorphism.</p>
<h1 id="Operator-Overloading"><a href="#Operator-Overloading" class="headerlink" title="Operator Overloading"></a>Operator Overloading</h1><p>Operator overloading is giving multiple meanings to existing operators, where the same operator causes different behaviors when acting on different types of data.</p>
<h2 id="Rules-for-Operator-Overloading"><a href="#Rules-for-Operator-Overloading" class="headerlink" title="Rules for Operator Overloading"></a>Rules for Operator Overloading</h2><ol>
<li>In C++, except for a few operators, all operators can be overloaded, and <strong>only existing operators can be overloaded</strong>.</li>
<li>After overloading, the precedence and associativity of operators will not change.</li>
<li>Operators are appropriately modified for the actual needs of new type data. The overloaded functionality should be similar to the original functionality, cannot change the number of operands, and at least one must be a custom type (otherwise it’s not called overloading).</li>
</ol>
<div class="note danger flat"><p>Several operators that cannot be overloaded: class membership operator <strong>“.”</strong>, member function pointer operator “.*”, scope resolution operator “::”, and ternary operator “?:”</p>
</div>

<hr>
<p>There are two forms of overloading: <strong>overloading as non-static member functions of a class</strong> and <strong>overloading as non-member functions</strong>.</p>
<p>General form for overloading as non-static member functions and non-member functions of a class:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">返回类型 <span class="keyword">operator</span> 运算符(形参表)</span><br><span class="line">&#123;</span><br><span class="line">  函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="note info flat"><p>When overloading as a non-member function, sometimes you need to access members in the class, in which case it can be declared as a friend function.</p>
</div>

<p><strong>Note</strong>:</p>
<p>When an operator is overloaded as a member function of a class, the number of function parameters is one less than the original number of operands (except for postfix “++” and “–”); when overloaded as a non-member function, the number of parameters equals the number of original operands. The reason is that when overloaded as a member function of a class, the first operand becomes the target object of the function call, so it doesn’t need to appear in the parameter list, and the function body can directly access the members of the first operand. When overloaded as a non-member function, all operands of the operator must be explicitly passed through parameters.</p>
<h2 id="Operator-Overloading-as-Member-Functions"><a href="#Operator-Overloading-as-Member-Functions" class="headerlink" title="Operator Overloading as Member Functions"></a>Operator Overloading as Member Functions</h2><p>Mainly the difference between unary and binary operators.</p>
<p>For binary operators, the data type of the preceding class should be a member function of that class, and the data type of the following class should be placed in the formal parameters.</p>
<p>Unary operators are divided into two types: <strong>prefix unary operators</strong> and <strong>postfix unary operators</strong>. (++, – are unary operators, different names depending on placement)</p>
<ul>
<li><p>For prefix unary operators, the overloaded member function has no formal parameters;</p>
</li>
<li><p>For postfix unary operators, the function must have an int formal parameter. This int parameter serves no purpose in the operation, it’s only used to distinguish between prefix and postfix.</p>
</li>
</ul>
<h2 id="Operator-Overloading-as-Non-Member-Functions"><a href="#Operator-Overloading-as-Non-Member-Functions" class="headerlink" title="Operator Overloading as Non-Member Functions"></a>Operator Overloading as Non-Member Functions</h2><p>For binary operators, of the two data types before and after, only one needs to be a custom data type to enable operator overloading, and both data types need to be function formal parameters.</p>
<p>For prefix unary operators, the formal parameter is the data type being operated on.</p>
<p>For postfix unary operators, there are two formal parameters: one is the data type being operated on, and the other is an int data type.</p>
<div class="note success flat"><p>It’s not hard to see that the main difference between member functions and non-member functions is that member functions implicitly treat the previous operand as the object of the function call, while non-member functions do not.</p>
</div>

<hr>
<p>This section uses a Complex (complex number class) to illustrate</p>
<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/hustlixiang21/cpp-practice/main/%E5%AE%9D%E8%B4%9D%E6%96%87%E4%BB%B6/3.4.bmp">Click to view problem image</a> (CUG experiment problem)</p>
<p> <a target="_blank" rel="noopener" href="https://github.com/hustlixiang21/cpp-practice/blob/main/Complex/main.cpp">Source code on github</a></p>
<h1 id="Virtual-Functions"><a href="#Virtual-Functions" class="headerlink" title="Virtual Functions"></a>Virtual Functions</h1><p>Virtual functions are the foundation of dynamic binding. Virtual functions must be non-static member functions. After virtual functions are derived, polymorphism during runtime can be implemented in the class hierarchy.</p>
<h2 id="General-Virtual-Function-Members"><a href="#General-Virtual-Function-Members" class="headerlink" title="General Virtual Function Members"></a>General Virtual Function Members</h2><p>Declaration syntax</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">virtual</span> 函数类型 函数名(形参表)；</span><br></pre></td></tr></table></figure>

<div class="note danger flat"><p>Virtual function declarations can only appear in function prototype declarations in class definitions, not in member function implementations.</p>
</div>

<p>Conditions required for polymorphism during runtime:</p>
<pre><code>1. Assignment compatibility rules
1. Declare virtual functions
1. Call through member functions or access virtual functions through pointers or references
</code></pre>
<p>If the derived class does not explicitly declare virtual functions, the system will follow these rules to determine whether a function member in the derived class is a virtual function:</p>
<ol>
<li>Whether the function has the same name as the base class virtual function.</li>
<li>Whether the function has the same number of parameters and corresponding parameter types as the base class virtual function.</li>
<li>Whether the function has the same return type as the base class virtual function or satisfies assignment compatibility rules for pointer and reference type return values.</li>
</ol>
<p>If the above conditions are met, the virtual function in the derived class will <strong>override</strong> all functions with the same name in the base class, which is scope hiding. Of course, it can also be distinguished through the scope resolution operator “::”.</p>
<p>It should be emphasized that dynamic binding only occurs when virtual functions are called through base class pointers or references.</p>
<div class="note success flat"><p>Actually, it doesn’t matter whether you add the virtual keyword before virtual functions in derived classes, but it’s recommended to add it to make it clearer that they are virtual functions.</p>
</div>

<p><strong>Object slicing</strong> refers to using an instance of a derived class to initialize a base class object, which calls the base class copy constructor. That is, only the data members of the derived class that are the same as the base class will be copied, and the rest will be ignored. At this point, this base class object has no relationship with the derived class object, which is very consistent with type compatibility rules.</p>
<h2 id="Virtual-Destructors"><a href="#Virtual-Destructors" class="headerlink" title="Virtual Destructors"></a>Virtual Destructors</h2><p>Virtual constructors cannot be declared, but virtual destructors can be declared. The syntax is to add a virtual keyword before the normal destructor.</p>
<p>So when do you need to use virtual destructors?</p>
<p>When a base class pointer points to a derived class object, if <code>delete(base class pointer)</code> is performed at this time, it will call the base class destructor instead of the derived class destructor, causing memory leaks. (I actually think this situation is almost never encountered, just understand it) The difference from polymorphism of ordinary member functions is not much.</p>
<h1 id="Pure-Virtual-Functions-and-Abstract-Classes"><a href="#Pure-Virtual-Functions-and-Abstract-Classes" class="headerlink" title="Pure Virtual Functions and Abstract Classes"></a>Pure Virtual Functions and Abstract Classes</h1><h2 id="Pure-Virtual-Functions"><a href="#Pure-Virtual-Functions" class="headerlink" title="Pure Virtual Functions"></a>Pure Virtual Functions</h2><p>Pure virtual functions are virtual functions declared in the base class that have no definition in the base class but require any derived class to define its own implementation. The method to implement pure virtual functions in the base class is to add “&#x3D;0” after the function prototype, for example:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>My big question is why introduce pure virtual functions?</p>
<ol>
<li>To facilitate the use of polymorphism features, we often need to define virtual functions in the base class.</li>
<li>In many cases, it is unreasonable for the base class itself to generate objects.</li>
</ol>
<p>For example, animals as a base class can derive subclasses like tigers and peacocks, but animals themselves generating objects is obviously unreasonable.</p>
<p>To solve the above problems, the concept of pure virtual functions was introduced. When a function is defined as a pure virtual function, the compiler requires that it must be overridden in derived classes to achieve polymorphism. Classes containing pure virtual functions are called abstract classes and cannot generate objects. This solves the above two problems well. Classes that declare pure virtual functions are abstract classes. Therefore, <strong>users cannot create instances of abstract classes</strong>, only instances of their derived classes (which implement the definitions of pure virtual functions in the base class). The most significant feature of pure virtual functions is: they <strong>must redeclare the function in inherited classes</strong> (without the &#x3D;0 at the end, otherwise the derived class cannot be instantiated), and they <strong>often have no definition in abstract classes</strong>. The purpose of defining pure virtual functions is to <strong>make derived classes only inherit the function interface</strong>. The meaning of pure virtual functions is to allow all class objects (mainly derived class objects) to execute the actions of pure virtual functions, but the class cannot provide a reasonable default implementation for pure virtual functions. So the declaration of pure virtual functions in a class is telling the designer of the subclass, “You must provide an implementation of the pure virtual function, but I don’t know how you will implement it.”</p>
<h2 id="Abstract-Classes"><a href="#Abstract-Classes" class="headerlink" title="Abstract Classes"></a>Abstract Classes</h2><p>Very simple, classes with pure virtual functions are abstract classes and <strong>cannot be instantiated</strong></p>
<p>If you want to learn more, <a target="_blank" rel="noopener" href="https://blog.csdn.net/LY_ysys629/article/details/76904129">see the blog</a>.</p>
<h1 id="Program-Example-Variable-Step-Size-Trapezoidal-Integration-Algorithm-for-Solving-Function-Definite-Integrals"><a href="#Program-Example-Variable-Step-Size-Trapezoidal-Integration-Algorithm-for-Solving-Function-Definite-Integrals" class="headerlink" title="Program Example - Variable Step Size Trapezoidal Integration Algorithm for Solving Function Definite Integrals"></a>Program Example - Variable Step Size Trapezoidal Integration Algorithm for Solving Function Definite Integrals</h1><p><a target="_blank" rel="noopener" href="https://github.com/hustlixiang21/cpp-practice/tree/main/%E5%8F%98%E6%AD%A5%E9%95%BF%E6%A2%AF%E5%BD%A2%E7%A7%AF%E5%88%86%E7%AE%97%E6%B3%95%E6%B1%82%E8%A7%A3%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E7%A7%AF%E5%88%86.cpp">See github</a></p>
<h1 id="Comprehensive-Example-Improvement-of-Personal-Bank-Account-Management-Program"><a href="#Comprehensive-Example-Improvement-of-Personal-Bank-Account-Management-Program" class="headerlink" title="Comprehensive Example - Improvement of Personal Bank Account Management Program"></a>Comprehensive Example - Improvement of Personal Bank Account Management Program</h1><p><a target="_blank" rel="noopener" href="https://github.com/hustlixiang21/cpp-practice/tree/main/Personal_bank_management_update_2">See github</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://xloverflow.github.io">Xiang Li</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://xloverflow.github.io/2022/07/31/Polymorphism/">https://xloverflow.github.io/2022/07/31/Polymorphism/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Study-Notes/">Study Notes</a><a class="post-meta__tags" href="/tags/C-Programming/">C++ Programming</a><a class="post-meta__tags" href="/tags/C-Language/">C++ Language</a></div><div class="post-share"><div class="social-share" data-image="https://pic1.zhimg.com/80/v2-aa2b0445c8d4db32c0e021608da2a7fc_1440w.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/08/04/Templates%20and%20Data%20Organization/" title="Templates and Data Organization"><img class="cover" src="https://pic1.zhimg.com/80/v2-4d8dbc5f894427d430bdf29ad9ee3d04_1440w.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Templates and Data Organization</div></div><div class="info-2"><div class="info-item-1">Function Templates and Class TemplatesTemplates can implement parametric polymorphism, which parameterizes the types of objects that programs process, enabling a single program to handle multiple different types of objects. Function TemplatesThe purpose of function templates is simply to avoid repetitive writing of functions that only differ in the data types they handle, greatly improving code reusability and thus enhancing software development efficiency. The syntax form adds the statement ...</div></div></div></a><a class="pagination-related" href="/2022/07/31/CPP%20Inheritance%20and%20Derivation/" title="CPP Inheritance and Derivation"><img class="cover" src="https://picx.zhimg.com/80/v2-198d4af1c9c6939cf37223aae9e7102f_1440w.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">CPP Inheritance and Derivation</div></div><div class="info-2"><div class="info-item-1">Class Inheritance and DerivationOverviewInheritance means obtaining attributes and behavioral characteristics from ancestors. Class inheritance is when a new class obtains existing characteristics from an existing class. From another perspective, the process of creating a new class from an existing class is called class derivation. They are essentially the same, just the same process viewed from different angles.   Purpose of Inheritance and DerivationPurpose of inheritance: Achieve reuse of ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/07/23/C++%20Arrays,%20Pointers%20and%20Strings/" title="C++ Arrays, Pointers and Strings"><img class="cover" src="https://pica.zhimg.com/80/v2-bb5f6ef138cca79e736aa26bb4bdc2e4_1440w.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-23</div><div class="info-item-2">C++ Arrays, Pointers and Strings</div></div><div class="info-2"><div class="info-item-1">ArraysAn array is a collection of objects with a certain sequential relationship, and the objects that make up the array become elements of that array. An array name is a pointer that cannot be assigned, called a pointer constant. Two-dimensional arrays in C++ are treated as arrays of one-dimensional arrays. Therefore, two-dimensional arrays are stored in row-major order.    When passing arrays as parameters, the size of the first dimension is generally not specified, and even if specified, i...</div></div></div></a><a class="pagination-related" href="/2022/07/20/C++%20Classes%20and%20Objects/" title="C++ Classes and Objects"><img class="cover" src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/larm-rmah-1cvEeuJKYto-unsplash.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="info-item-2">C++ Classes and Objects</div></div><div class="info-2"><div class="info-item-1">Classes and ObjectsBasic Characteristics of Object-Oriented ProgrammingAbstraction  Summarize the common attributes and behaviors of objects of the same class to form a class. First focus on the essence and description of the problem, then the implementation process or details. Data abstraction: Describe the attributes or state of objects of a certain class (physical quantities that distinguish objects from each other). Code abstraction: Describe the common behavioral characteristics or funct...</div></div></div></a><a class="pagination-related" href="/2022/07/21/C++%20Data%20Sharing%20and%20Protection/" title="C++ Data Sharing and Protection"><img class="cover" src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/romain-briaux-P-O6B62iWgA-unsplash.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-21</div><div class="info-item-2">C++ Data Sharing and Protection</div></div><div class="info-2"><div class="info-item-1">Identifier Scope and VisibilityScopeScope is the valid region where an identifier is effective in the program text. Function Prototype ScopeThe scope of formal parameters during function prototype declaration is the function prototype scope. In function prototype parameter lists, only the type matters, not the identifier, which can be omitted. For readability, it’s better to include it.   Local ScopeSimply understood as variables declared within function bodies, from the declaration point to ...</div></div></div></a><a class="pagination-related" href="/2022/07/20/C++%20Functions/" title="C++ Functions"><img class="cover" src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/jason-blackeye-GPPAjJicemU-unsplash.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="info-item-2">C++ Functions</div></div><div class="info-2"><div class="info-item-1">Functionsrand functionFunction prototype: int rand(void);Required header file: &lt;cstdlib&gt;Function and return value: Generates and returns a pseudo-random number  srand functionFunction prototype: void srand(unsigned int seed);Parameter: seed for generating random numbersRequired header file: &lt;cstdlib&gt;Function: Sets the starting point for rand() to generate a series of pseudo-random integers. Using 1 as the seed parameter can reinitialize rand().  It should be noted that if no seed ...</div></div></div></a><a class="pagination-related" href="/2022/07/31/CPP%20Inheritance%20and%20Derivation/" title="CPP Inheritance and Derivation"><img class="cover" src="https://picx.zhimg.com/80/v2-198d4af1c9c6939cf37223aae9e7102f_1440w.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-31</div><div class="info-item-2">CPP Inheritance and Derivation</div></div><div class="info-2"><div class="info-item-1">Class Inheritance and DerivationOverviewInheritance means obtaining attributes and behavioral characteristics from ancestors. Class inheritance is when a new class obtains existing characteristics from an existing class. From another perspective, the process of creating a new class from an existing class is called class derivation. They are essentially the same, just the same process viewed from different angles.   Purpose of Inheritance and DerivationPurpose of inheritance: Achieve reuse of ...</div></div></div></a><a class="pagination-related" href="/2022/08/04/Generic%20Programming%20and%20C++%20Standard%20Template%20Library%20(STL)/" title="Generic Programming and C++ Standard Template Library (STL)"><img class="cover" src="https://pic1.zhimg.com/80/v2-b3235667ca289c4b127e5448bed79144_1440w.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-04</div><div class="info-item-2">Generic Programming and C++ Standard Template Library (STL)</div></div><div class="info-2"><div class="info-item-1">First, here are two reference articles:STL Function ReferenceWhat is STL? Generic Programming and STL StructureBasic Concepts of Generic ProgrammingRefers to writing programs that do not depend on specific data types. Templates are the main tools of generic programming. Terminology: Concepts Used to define data types that have certain functions. For example:  The concept of “all data types that can be compared (with comparison operators)” is denoted as Comparable The concept of “data types th...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://pica.zhimg.com/80/v2-b6830c2136b7784c0aba649af7ec2867_1440w.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Xiang Li</div><div class="author-info-description">Xiang Li's Blog</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/XLOverflow"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Talk is cheap. Show me the code.</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Polymorphism-Overview"><span class="toc-number">1.</span> <span class="toc-text">Polymorphism Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Types-of-Polymorphism"><span class="toc-number">1.1.</span> <span class="toc-text">Types of Polymorphism</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Implementation-of-Polymorphism"><span class="toc-number">1.2.</span> <span class="toc-text">Implementation of Polymorphism</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Operator-Overloading"><span class="toc-number">2.</span> <span class="toc-text">Operator Overloading</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Rules-for-Operator-Overloading"><span class="toc-number">2.1.</span> <span class="toc-text">Rules for Operator Overloading</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Operator-Overloading-as-Member-Functions"><span class="toc-number">2.2.</span> <span class="toc-text">Operator Overloading as Member Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Operator-Overloading-as-Non-Member-Functions"><span class="toc-number">2.3.</span> <span class="toc-text">Operator Overloading as Non-Member Functions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Virtual-Functions"><span class="toc-number">3.</span> <span class="toc-text">Virtual Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#General-Virtual-Function-Members"><span class="toc-number">3.1.</span> <span class="toc-text">General Virtual Function Members</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Virtual-Destructors"><span class="toc-number">3.2.</span> <span class="toc-text">Virtual Destructors</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Pure-Virtual-Functions-and-Abstract-Classes"><span class="toc-number">4.</span> <span class="toc-text">Pure Virtual Functions and Abstract Classes</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Pure-Virtual-Functions"><span class="toc-number">4.1.</span> <span class="toc-text">Pure Virtual Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Abstract-Classes"><span class="toc-number">4.2.</span> <span class="toc-text">Abstract Classes</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Program-Example-Variable-Step-Size-Trapezoidal-Integration-Algorithm-for-Solving-Function-Definite-Integrals"><span class="toc-number">5.</span> <span class="toc-text">Program Example - Variable Step Size Trapezoidal Integration Algorithm for Solving Function Definite Integrals</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Comprehensive-Example-Improvement-of-Personal-Bank-Account-Management-Program"><span class="toc-number">6.</span> <span class="toc-text">Comprehensive Example - Improvement of Personal Bank Account Management Program</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/26/HUST%20Information%20System%20Security%20Lab3-Web%20Security/" title="HUST Information System Security Lab3-Web Security"><img src="https://pic1.zhimg.com/80/v2-416f1b8d4133d67e746a67adbb40f508_720w.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HUST Information System Security Lab3-Web Security"/></a><div class="content"><a class="title" href="/2024/09/26/HUST%20Information%20System%20Security%20Lab3-Web%20Security/" title="HUST Information System Security Lab3-Web Security">HUST Information System Security Lab3-Web Security</a><time datetime="2024-09-26T15:04:15.000Z" title="Created 2024-09-26 11:04:15">2024-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/26/HUST%20Information%20System%20Security%20Lab2-System%20Security/" title="HUST Information System Security Lab2-System Security"><img src="https://picx.zhimg.com/80/v2-06450eedf96def79a590cec5c6c0ecbd_720w.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HUST Information System Security Lab2-System Security"/></a><div class="content"><a class="title" href="/2024/09/26/HUST%20Information%20System%20Security%20Lab2-System%20Security/" title="HUST Information System Security Lab2-System Security">HUST Information System Security Lab2-System Security</a><time datetime="2024-09-26T15:03:54.000Z" title="Created 2024-09-26 11:03:54">2024-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/26/HUST%20Information%20System%20Security%20Lab1-Software%20Security/" title="HUST Information System Security Lab1-Software Security"><img src="https://t3.chei.com.cn/zyk/zybk/zyjd/cdn/showImg/ikb2ll7ejr4ufkfj.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HUST Information System Security Lab1-Software Security"/></a><div class="content"><a class="title" href="/2024/09/26/HUST%20Information%20System%20Security%20Lab1-Software%20Security/" title="HUST Information System Security Lab1-Software Security">HUST Information System Security Lab1-Software Security</a><time datetime="2024-09-26T15:03:38.000Z" title="Created 2024-09-26 11:03:38">2024-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/05/HUST%20Operating%20System%20Lab3:%20Memory%20Management/" title="HUST Operating System Lab3: Memory Management"><img src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/david-marcu-78A265wPiO4-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HUST Operating System Lab3: Memory Management"/></a><div class="content"><a class="title" href="/2023/12/05/HUST%20Operating%20System%20Lab3:%20Memory%20Management/" title="HUST Operating System Lab3: Memory Management">HUST Operating System Lab3: Memory Management</a><time datetime="2023-12-05T23:51:55.000Z" title="Created 2023-12-05 18:51:55">2023-12-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/29/HUST%20Operating%20System%20Lab2:%20Process&amp;Thread%20Synchronization%20Mechanisms%20and%20Application%20Programming/" title="HUST Operating System Lab2: Process&amp;Thread Synchronization Mechanisms and Application Programming"><img src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/v2osk-1Z2niiBPg5A-unsplash.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HUST Operating System Lab2: Process&amp;Thread Synchronization Mechanisms and Application Programming"/></a><div class="content"><a class="title" href="/2023/11/29/HUST%20Operating%20System%20Lab2:%20Process&amp;Thread%20Synchronization%20Mechanisms%20and%20Application%20Programming/" title="HUST Operating System Lab2: Process&amp;Thread Synchronization Mechanisms and Application Programming">HUST Operating System Lab2: Process&amp;Thread Synchronization Mechanisms and Application Programming</a><time datetime="2023-11-29T15:01:55.000Z" title="Created 2023-11-29 10:01:55">2023-11-29</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Xiang Li</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: 'fb37ffde539166b338d8',
      clientSecret: '00c01014243d312219aa68b6a2e22f7f19f4c8ef',
      repo: 'blog-comments',
      owner: 'XLOverflow',
      admin: ['XLOverflow'],
      updateCountCallback: commentCount,
      ...option,
      id: isShuoshuo ? path : (option && option.id) || 'ef4a5ab693a981787bd18e759a07ebd6'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await btf.getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !true) {
    if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>