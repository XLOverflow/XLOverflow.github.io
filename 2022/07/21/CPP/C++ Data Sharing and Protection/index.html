<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>C++ Data Sharing and Protection | Life is not a race, but a journey</title><meta name="author" content="Xiang Li"><meta name="copyright" content="Xiang Li"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Notes on data sharing and protection in C++ learning">
<meta property="og:type" content="article">
<meta property="og:title" content="C++ Data Sharing and Protection">
<meta property="og:url" content="https://xloverflow.github.io/2022/07/21/CPP/C++%20Data%20Sharing%20and%20Protection/index.html">
<meta property="og:site_name" content="Life is not a race, but a journey">
<meta property="og:description" content="Notes on data sharing and protection in C++ learning">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/romain-briaux-P-O6B62iWgA-unsplash.jpg">
<meta property="article:published_time" content="2022-07-21T23:50:22.000Z">
<meta property="article:modified_time" content="2026-02-15T05:04:17.010Z">
<meta property="article:author" content="Xiang Li">
<meta property="article:tag" content="C++ Language">
<meta property="article:tag" content="C++ Programming">
<meta property="article:tag" content="Study Notes">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/romain-briaux-P-O6B62iWgA-unsplash.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "C++ Data Sharing and Protection",
  "url": "https://xloverflow.github.io/2022/07/21/CPP/C++%20Data%20Sharing%20and%20Protection/",
  "image": "https://raw.githubusercontent.com/hustlixiang21/blog-image/main/romain-briaux-P-O6B62iWgA-unsplash.jpg",
  "datePublished": "2022-07-21T23:50:22.000Z",
  "dateModified": "2026-02-15T05:04:17.010Z",
  "author": [
    {
      "@type": "Person",
      "name": "Xiang Li",
      "url": "https://xloverflow.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://xloverflow.github.io/2022/07/21/CPP/C++%20Data%20Sharing%20and%20Protection/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C++ Data Sharing and Protection',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://pica.zhimg.com/80/v2-b6830c2136b7784c0aba649af7ec2867_1440w.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">70</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> Album</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fas fa-video"></i><span> Videos</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> Books</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://raw.githubusercontent.com/hustlixiang21/blog-image/main/romain-briaux-P-O6B62iWgA-unsplash.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Life is not a race, but a journey</span></a><a class="nav-page-title" href="/"><span class="site-name">C++ Data Sharing and Protection</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/List/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/List/gallery/"><i class="fa-fw fa fa-image"></i><span> Album</span></a></li><li><a class="site-page child" href="/List/movies/"><i class="fa-fw fas fa-video"></i><span> Videos</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> Books</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><!-- Language switch button styled like menu item--><div class="menus_items lang-switch"><div class="menus_item"><a class="site-page lang-toggle" href="/zh/"><i class="fas fa-language fa-fw"></i><span> 中文</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">C++ Data Sharing and Protection</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-07-21T23:50:22.000Z" title="Created 2022-07-21 19:50:22">2022-07-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2026-02-15T05:04:17.010Z" title="Updated 2026-02-15 00:04:17">2026-02-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C-C-Programming/">C/C++ Programming</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="identifier-scope-and-visibility">Identifier Scope and
Visibility</h1>
<h2 id="scope">Scope</h2>
<p>Scope is the <strong>valid region</strong> where an identifier is
effective in the program text.</p>
<h3 id="function-prototype-scope">Function Prototype Scope</h3>
<p>The scope of formal parameters during function prototype declaration
is the function prototype scope.</p>
<div class="note info flat"><p>In function prototype parameter lists, only the type matters, not the
identifier, which can be omitted. For readability, it’s better to
include it.</p>
</div>
<h3 id="local-scope">Local Scope</h3>
<p>Simply understood as variables declared <strong>within function
bodies</strong>, from the declaration point to the closing brace of the
block where the declaration is located.</p>
<blockquote>
<p>Variables with local scope are also called local variables.</p>
</blockquote>
<h3 id="class-scope">Class Scope</h3>
<p>A class is a collection of named members, and its member m has class
scope. There are three ways to access it:</p>
<ol type="1">
<li>If member m is not defined in the member function and is not masked
by the function body, the function can directly access m;</li>
<li>Through expressions <code>x.m</code> or <code>X::m</code>.
<strong>This is the most basic method</strong>, with the latter mainly
used to access static members of the class.</li>
<li>Through <code>ptr-&gt;m</code> access, where ptr is a
<strong>pointer</strong> to an object of that class.</li>
</ol>
<h3 id="namespace-scope">Namespace Scope</h3>
<p>The purpose of namespaces is to eliminate ambiguity that may exist in
different files in a project, for example: when variables in two
different modules have the same name.</p>
<p>The syntax is as follows:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> namespace_name&#123;</span><br><span class="line">  <span class="function">Various declarations within the <span class="title">namespace</span> <span class="params">(function declarations, <span class="keyword">class</span> declarations, ...)</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Within the namespace, identifiers defined in the current space can be
used directly. If you need to use identifiers defined in other
namespaces, you need to use <code>namespace_name::identifier</code>. To
avoid verbosity, using statements are provided.</p>
<p>There are two forms of using statements:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> namespace_name::identifier</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> namespace_name</span><br></pre></td></tr></table></figure>
<p>Two special types of namespaces—global namespace and anonymous
namespace.</p>
<p>The global namespace is the default namespace, and identifiers
declared outside explicitly declared namespaces are all in a global
namespace.</p>
<p>Anonymous namespace only needs to omit the namespace name when
defining, and its purpose is to prevent identifiers you define from
being accessed by any other namespace.</p>
<blockquote><p>All identifiers in the C++ standard library are declared in the std
namespace, cout, cin, endl are all like this, so every program uses
<code>using namespace std</code>, otherwise you need to use
<code>std::cin</code>…</p>
</blockquote>
<p>Additionally, namespaces <strong>allow nesting</strong>.</p>
<div class="note info flat"><p>Variables with namespace scope are also called global variables.</p>
</div>
<hr />
<h2 id="visibility">Visibility</h2>
<p>The content is relatively simple and straightforward, so it’s
omitted.</p>
<hr />
<h1 id="object-lifetime">Object Lifetime</h1>
<h2 id="static-lifetime">Static Lifetime</h2>
<p>Objects whose lifetime is the same as the program’s runtime are said
to have static lifetime, and the keyword <strong>static</strong> needs
to be used when declaring.</p>
<p>Characteristics: A copy is not created with each function call, nor
does it become invalid when the function returns. Variables are shared
during each call period. Assignment is performed only once, and the
assignment statement at declaration is not executed multiple times.</p>
<div class="note info flat"><p>If not initialized at declaration, it defaults to 0.</p>
</div>
<h2 id="dynamic-lifetime">Dynamic Lifetime</h2>
<p>Local lifetime objects are born at the declaration point and end when
the block where the declaration is located finishes execution.</p>
<h1 id="class-static-members">Class Static Members</h1>
<p>Objects also need to share data with each other, and static members
solve this problem.</p>
<p>For example, if there’s an Employee class, we have several Employee
objects, but how do we count how many Employee objects there are? This
is when static data members can be used, as this data member is shared
by all objects.</p>
<h2 id="static-data-members">Static Data Members</h2>
<p>When a certain attribute is <strong>shared by the entire
class</strong> and <strong>does not belong to any specific
object</strong>, the <strong>static</strong> keyword is used to declare
it as a static member. There is only one copy in the entire class,
maintained and used by all objects.</p>
<p>Because it doesn’t belong to any object and has static lifetime, it
is accessed through the class name.
“<strong>class_name::identifier</strong>”.</p>
<div class="note warning flat"><p>In the class definition, only a reference declaration is made. A
definition declaration must be made somewhere in the namespace scope
using the class name qualifier, where initialization can also be
performed.</p>
</div>
<p>Program example:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;                                        <span class="comment">//Point class definition public: //external interface</span></span><br><span class="line">	<span class="built_in">Point</span>(<span class="type">int</span> x = <span class="number">0</span>, <span class="type">int</span> y = <span class="number">0</span>) : <span class="built_in">x</span>(x), <span class="built_in">y</span>(y)&#123;          <span class="comment">//constructor                                                                                            </span></span><br><span class="line">  	count++;            <span class="comment">//increment count in constructor, all objects maintain the same count </span></span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">Point</span>(Point &amp;p)&#123;      <span class="comment">//copy constructor</span></span><br><span class="line">	x = p.x;</span><br><span class="line">	y = p.y;</span><br><span class="line">	count++;</span><br><span class="line">	&#125; </span><br><span class="line">	~<span class="built_in">Point</span>() &#123; count--; &#125; </span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getX</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> x; &#125; </span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">getY</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> y; &#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">showCount</span><span class="params">()</span> </span>&#123; <span class="comment">//output static data member </span></span><br><span class="line">  	cout &lt;&lt; <span class="string">&quot; Object count = &quot;</span> &lt;&lt; count &lt;&lt; endl;</span><br><span class="line">  &#125; </span><br><span class="line"><span class="keyword">private</span>:             <span class="comment">//private data members </span></span><br><span class="line">  <span class="type">int</span> x, y; </span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> count;  <span class="comment">//static data member declaration, used to record the number of points </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Point::count = <span class="number">0</span>;<span class="comment">//static data member definition and initialization, using class name qualifier </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;         <span class="comment">//main function </span></span><br><span class="line">  <span class="function">Point <span class="title">a</span><span class="params">(<span class="number">4</span>, <span class="number">5</span>)</span></span>;     <span class="comment">//define object a, its constructor will increment count by 1 </span></span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Point A: &quot;</span> &lt;&lt; a.<span class="built_in">getX</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; a.<span class="built_in">getY</span>(); a.<span class="built_in">showCount</span>(); <span class="comment">//output object count</span></span><br><span class="line">	<span class="function">Point <span class="title">b</span><span class="params">(a)</span></span>;        <span class="comment">//define object b, its constructor will increment count by 1 </span></span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Point B: &quot;</span> &lt;&lt; b.<span class="built_in">getX</span>() &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; b.<span class="built_in">getY</span>(); b.<span class="built_in">showCount</span>(); <span class="comment">//output object count </span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="static-member-functions">Static Member Functions</h2>
<p>There’s actually a problem in the above program: the showcount
function requires the existence of a Point object to be called, but what
if I want to directly output the value of count? This is when static
member functions are needed, allowing direct function calls through the
class name without depending on objects.</p>
<div class="note success flat"><p>Although static member functions can also be accessed using objects,
it’s generally customary to access them through the class name. Even
when accessed through an object name, the function has no relationship
with the object.</p>
</div>
<h1 id="class-friends">Class Friends</h1>
<p>Using the Point class as an example, what if we need a function to
calculate the distance between two points?</p>
<p>Setting it as an ordinary function outside the class doesn’t reflect
the connection between the function and points, and can’t directly use
point coordinates;</p>
<p>Setting it as a member function inside the class doesn’t conform to
the abstraction that a class represents the characteristics of a type of
thing, because distance represents the relationship between points, not
the characteristics of a point.</p>
<blockquote><p>In <a
target="_blank" rel="noopener" href="https://hustlixiang21.github.io/2022/07/20/CPP类和对象/">class
composition</a>, there’s a Point and Line class, and the Line class has
a function to calculate line segment length. But if we’re facing many
points and frequently need to calculate distances between any two
points, do we need to construct a Line class every time? This is
obviously very troublesome.</p>
</blockquote>
<p>Friend relationships provide a mechanism for data sharing between
member functions of different classes or objects, and between class
member functions and general functions.</p>
<p>In a class, the keyword <strong>friend</strong> is used to declare
functions as friend functions and classes as friend classes. <strong>All
functions of a friend class are friend functions</strong>.</p>
<h2 id="friend-functions">Friend Functions</h2>
<p>These are <strong>non-member functions</strong> modified with the
keyword <strong>friend</strong> in a class. They can be ordinary
functions or member functions of other classes. In the function body of
friend functions, private and protected members of the class can be
accessed through object names.</p>
<p>There’s <a
target="_blank" rel="noopener" href="https://github.com/hustlixiang21/cpp-practice/blob/main/Point_distance(friend)/main.cpp">practice
source code</a> on github.</p>
<h2 id="friend-classes">Friend Classes</h2>
<p>Similar to friend functions. If class A is a friend class of class B,
then all member functions of class A are friend functions of class B and
can access private and protected members of class B.</p>
<p>Special attention ⚠️:</p>
<ul>
<li>Friend relationships are <strong>not transitive</strong>. If B is a
friend of A and C is a friend of B, C is <strong>not a friend of
A</strong> without explicit declaration.</li>
<li>Friend relationships are <strong>unidirectional</strong>. If B is a
friend of A, B can access A, but A cannot access B.</li>
<li>Friend relationships are <strong>not inherited</strong>. If B is a
friend of A, B’s derived classes do not automatically become friends of
A. A simple analogy is: if someone trusts your father, they don’t
necessarily trust you.</li>
</ul>
<h1 id="shared-data-protection">Shared Data Protection</h1>
<h2 id="constant-objects">Constant Objects</h2>
<p>The data value members of constant objects cannot be changed during
the entire lifetime of the object. <strong><u>Constant objects must be
initialized and cannot be updated.</u></strong></p>
<div class="note warning flat"><p>Specifying initial values at definition is called initialization, and
subsequent changes through assignment operations are called assignment.
<strong>Don’t confuse initialization with assignment</strong>!</p>
</div>
<h2 id="class-members-modified-with-const">Class Members Modified with
const</h2>
<h3 id="constant-member-functions">Constant Member Functions</h3>
<p>Declaration format:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">type_specifier <span class="title">function_name</span><span class="params">(parameter_list)</span> <span class="type">const</span></span>;</span><br></pre></td></tr></table></figure>
<p>Note ⚠️:</p>
<ul>
<li>If an object is a constant object, only constant member functions
can be called through that constant object, <strong>other member
functions cannot be called</strong>! This is C++’s protection for
constant objects and is the <strong>only external interface
method</strong> for constant objects.</li>
<li>Whether called through a constant object or not, during the call of
a constant member function, the target object is treated as a constant
object. Therefore, constant member functions cannot update the data
members of the target object, nor can they call member functions of that
class that are not modified with const for the target object (ensuring
that constant member functions do not modify the data member values of
the target object).</li>
<li>The const keyword can be used to distinguish overloaded functions
(functions with the same name but with or without const are different
functions).</li>
</ul>
<h3 id="constant-data-members">Constant Data Members</h3>
<p>Data members declared with const are constant data members, and no
function can assign values to them. Constructors can only obtain initial
values through initialization lists for these data members.</p>
<div class="note info flat"><p>Static variables and constants in class members should be defined
outside the class definition, but C++ provides an exception: if a
class’s static constant has integer type or enumeration type, the
constant value can be directly specified in the class definition.</p>
</div>
<h3 id="constant-references">Constant References</h3>
<p>If a reference is modified with const when declared, the declared
reference is a constant reference, and the object referenced by the
constant reference cannot be updated. When used as function parameters,
it prevents accidental changes to actual parameters.</p>
<blockquote><p>For parameters whose values cannot be changed in functions, it’s not
suitable to use ordinary reference passing, as it would prevent
<strong>constant objects from being passed in</strong>. Using
pass-by-value or passing constant references can avoid this problem.
Pass-by-value is more time-consuming, so passing constant references is
better. Copy constructor parameters generally also choose constant
references!</p>
</blockquote>
<h1
id="multi-file-structure-and-compilation-preprocessing-commands">Multi-file
Structure and Compilation Preprocessing Commands</h1>
<p>Since there’s a foundation in C language, this section only lists
some unfamiliar and less memorable content.</p>
<h2 id="general-organization-structure-of-c-programs">General
Organization Structure of C++ Programs</h2>
<p>A project can be divided into multiple source files:</p>
<ul>
<li>Class declaration files (.h files)</li>
<li>Class implementation files (.cpp files)</li>
<li>Class usage files (.cpp files containing main())</li>
</ul>
<p><img
src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/%E6%88%AA%E5%B1%8F2022-07-22%2000.16.36.png" /></p>
<h2 id="standard-c-library">Standard C++ Library</h2>
<p>The standard C++ class library is a collection of extremely flexible
and extensible reusable software modules.</p>
<p>Standard C++ classes and components are logically divided into 6
types:</p>
<ul>
<li>Input/Output classes<br />
</li>
<li>Container classes and abstract data types</li>
<li>Storage management classes</li>
<li>Algorithms</li>
<li>Error handling</li>
<li>Runtime environment support</li>
</ul>
<h1
id="comprehensive-examplepersonal-bank-account-management-program">Comprehensive
Example—Personal Bank Account Management Program</h1>
<p>The program source code has been uploaded to <a
target="_blank" rel="noopener" href="https://github.com/hustlixiang21/cpp-practice/tree/main/Personal_bank_management">github</a>
and compiled using <a
target="_blank" rel="noopener" href="https://hustlixiang21.github.io/2022/06/19/Makefile入门/">makefile</a>.</p>
<div class="note danger flat"><p>Serious error: static variables were not assigned initial values
externally, causing my progress to stagnate for two hours, and the
initialization assignment was done in the file where the class member
functions are defined.</p>
</div>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://xloverflow.github.io">Xiang Li</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://xloverflow.github.io/2022/07/21/CPP/C++%20Data%20Sharing%20and%20Protection/">https://xloverflow.github.io/2022/07/21/CPP/C++%20Data%20Sharing%20and%20Protection/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Study-Notes/">Study Notes</a><a class="post-meta__tags" href="/tags/C-Programming/">C++ Programming</a><a class="post-meta__tags" href="/tags/C-Language/">C++ Language</a></div><div class="post-share"><div class="social-share" data-image="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/romain-briaux-P-O6B62iWgA-unsplash.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/07/23/CPP/C++%20Arrays,%20Pointers%20and%20Strings/" title="C++ Arrays, Pointers and Strings"><img class="cover" src="https://pica.zhimg.com/80/v2-bb5f6ef138cca79e736aa26bb4bdc2e4_1440w.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">C++ Arrays, Pointers and Strings</div></div><div class="info-2"><div class="info-item-1">Notes on C++ arrays, pointers, and strings. Some content may be abbreviated due to prior C language knowledge.</div></div></div></a><a class="pagination-related" href="/2022/07/20/CPP/C++%20Classes%20and%20Objects/" title="C++ Classes and Objects"><img class="cover" src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/larm-rmah-1cvEeuJKYto-unsplash.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">C++ Classes and Objects</div></div><div class="info-2"><div class="info-item-1">Notes on C++ classes and objects</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/07/23/CPP/C++%20Arrays,%20Pointers%20and%20Strings/" title="C++ Arrays, Pointers and Strings"><img class="cover" src="https://pica.zhimg.com/80/v2-bb5f6ef138cca79e736aa26bb4bdc2e4_1440w.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-23</div><div class="info-item-2">C++ Arrays, Pointers and Strings</div></div><div class="info-2"><div class="info-item-1">Notes on C++ arrays, pointers, and strings. Some content may be abbreviated due to prior C language knowledge.</div></div></div></a><a class="pagination-related" href="/2022/07/20/CPP/C++%20Classes%20and%20Objects/" title="C++ Classes and Objects"><img class="cover" src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/larm-rmah-1cvEeuJKYto-unsplash.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="info-item-2">C++ Classes and Objects</div></div><div class="info-2"><div class="info-item-1">Notes on C++ classes and objects</div></div></div></a><a class="pagination-related" href="/2022/07/20/CPP/C++%20Functions/" title="C++ Functions"><img class="cover" src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/jason-blackeye-GPPAjJicemU-unsplash.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="info-item-2">C++ Functions</div></div><div class="info-2"><div class="info-item-1">Notes on C++ Functions chapter</div></div></div></a><a class="pagination-related" href="/2022/08/04/CPP/Generic%20Programming%20and%20C++%20Standard%20Template%20Library%20(STL)/" title="Generic Programming and C++ Standard Template Library (STL)"><img class="cover" src="https://pic1.zhimg.com/80/v2-b3235667ca289c4b127e5448bed79144_1440w.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-04</div><div class="info-item-2">Generic Programming and C++ Standard Template Library (STL)</div></div><div class="info-2"><div class="info-item-1">Introduction to C++ Standard Template Library (STL)</div></div></div></a><a class="pagination-related" href="/2022/07/31/CPP/CPP%20Inheritance%20and%20Derivation/" title="CPP Inheritance and Derivation"><img class="cover" src="https://picx.zhimg.com/80/v2-198d4af1c9c6939cf37223aae9e7102f_1440w.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-31</div><div class="info-item-2">CPP Inheritance and Derivation</div></div><div class="info-2"><div class="info-item-1">This note mainly records related concepts and code examples in CPP inheritance and derivation.</div></div></div></a><a class="pagination-related" href="/2022/07/20/CPP/Important%20Points%20to%20Note%20in%20C++%20Basics/" title="Important Points to Note in C++ Basics"><img class="cover" src="https://raw.githubusercontent.com/hustlixiang21/blog-image/main/ann-savchenko-H0h_89iFsWs-unsplash.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="info-item-2">Important Points to Note in C++ Basics</div></div><div class="info-2"><div class="info-item-1">Common pitfalls to note when transitioning from C to C++</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://pica.zhimg.com/80/v2-b6830c2136b7784c0aba649af7ec2867_1440w.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Xiang Li</div><div class="author-info-description">Xiang Li's Blog</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">70</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/XLOverflow"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Talk is cheap. Show me the code.</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#identifier-scope-and-visibility"><span class="toc-number">1.</span> <span class="toc-text">Identifier Scope and
Visibility</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#scope"><span class="toc-number">1.1.</span> <span class="toc-text">Scope</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#function-prototype-scope"><span class="toc-number">1.1.1.</span> <span class="toc-text">Function Prototype Scope</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#local-scope"><span class="toc-number">1.1.2.</span> <span class="toc-text">Local Scope</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#class-scope"><span class="toc-number">1.1.3.</span> <span class="toc-text">Class Scope</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#namespace-scope"><span class="toc-number">1.1.4.</span> <span class="toc-text">Namespace Scope</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#visibility"><span class="toc-number">1.2.</span> <span class="toc-text">Visibility</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#object-lifetime"><span class="toc-number">2.</span> <span class="toc-text">Object Lifetime</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#static-lifetime"><span class="toc-number">2.1.</span> <span class="toc-text">Static Lifetime</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dynamic-lifetime"><span class="toc-number">2.2.</span> <span class="toc-text">Dynamic Lifetime</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#class-static-members"><span class="toc-number">3.</span> <span class="toc-text">Class Static Members</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#static-data-members"><span class="toc-number">3.1.</span> <span class="toc-text">Static Data Members</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#static-member-functions"><span class="toc-number">3.2.</span> <span class="toc-text">Static Member Functions</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#class-friends"><span class="toc-number">4.</span> <span class="toc-text">Class Friends</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#friend-functions"><span class="toc-number">4.1.</span> <span class="toc-text">Friend Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#friend-classes"><span class="toc-number">4.2.</span> <span class="toc-text">Friend Classes</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shared-data-protection"><span class="toc-number">5.</span> <span class="toc-text">Shared Data Protection</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#constant-objects"><span class="toc-number">5.1.</span> <span class="toc-text">Constant Objects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class-members-modified-with-const"><span class="toc-number">5.2.</span> <span class="toc-text">Class Members Modified with
const</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#constant-member-functions"><span class="toc-number">5.2.1.</span> <span class="toc-text">Constant Member Functions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#constant-data-members"><span class="toc-number">5.2.2.</span> <span class="toc-text">Constant Data Members</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#constant-references"><span class="toc-number">5.2.3.</span> <span class="toc-text">Constant References</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#multi-file-structure-and-compilation-preprocessing-commands"><span class="toc-number">6.</span> <span class="toc-text">Multi-file
Structure and Compilation Preprocessing Commands</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#general-organization-structure-of-c-programs"><span class="toc-number">6.1.</span> <span class="toc-text">General
Organization Structure of C++ Programs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#standard-c-library"><span class="toc-number">6.2.</span> <span class="toc-text">Standard C++ Library</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#comprehensive-examplepersonal-bank-account-management-program"><span class="toc-number">7.</span> <span class="toc-text">Comprehensive
Example—Personal Bank Account Management Program</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/02/14/11711-Advanced-NLP/11711-Advanced-NLP-Retrieval-RAG/" title="11711 Advanced NLP: Retrieval and RAG"><img src="https://raw.githubusercontent.com/XLOverflow/blog-image/main/20260126152238836.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="11711 Advanced NLP: Retrieval and RAG"/></a><div class="content"><a class="title" href="/2026/02/14/11711-Advanced-NLP/11711-Advanced-NLP-Retrieval-RAG/" title="11711 Advanced NLP: Retrieval and RAG">11711 Advanced NLP: Retrieval and RAG</a><time datetime="2026-02-14T22:08:21.000Z" title="Created 2026-02-14 17:08:21">2026-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/13/15642-Machine-Learning-Systems/15642-ML-Systems-Distributed-Training-and-Parallelization/" title="15642 Machine Learning Systems: Distributed Training and Parallelization"><img src="https://raw.githubusercontent.com/XLOverflow/blog-image/main/20260122210733236.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="15642 Machine Learning Systems: Distributed Training and Parallelization"/></a><div class="content"><a class="title" href="/2026/02/13/15642-Machine-Learning-Systems/15642-ML-Systems-Distributed-Training-and-Parallelization/" title="15642 Machine Learning Systems: Distributed Training and Parallelization">15642 Machine Learning Systems: Distributed Training and Parallelization</a><time datetime="2026-02-13T21:00:00.000Z" title="Created 2026-02-13 16:00:00">2026-02-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/13/11868-LLM-Sys/11868-LLM-Sys-Decoding/" title="11868 LLM Sys: Decoding"><img src="https://raw.githubusercontent.com/XLOverflow/blog-image/main/20260126152238836.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="11868 LLM Sys: Decoding"/></a><div class="content"><a class="title" href="/2026/02/13/11868-LLM-Sys/11868-LLM-Sys-Decoding/" title="11868 LLM Sys: Decoding">11868 LLM Sys: Decoding</a><time datetime="2026-02-13T01:00:00.000Z" title="Created 2026-02-12 20:00:00">2026-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/12/11868-LLM-Sys/11868-LLM-Sys-Tokenization-and-Embedding/" title="11868 LLM Sys: Tokenization and Embedding"><img src="https://raw.githubusercontent.com/XLOverflow/blog-image/main/20260126152238836.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="11868 LLM Sys: Tokenization and Embedding"/></a><div class="content"><a class="title" href="/2026/02/12/11868-LLM-Sys/11868-LLM-Sys-Tokenization-and-Embedding/" title="11868 LLM Sys: Tokenization and Embedding">11868 LLM Sys: Tokenization and Embedding</a><time datetime="2026-02-12T20:30:00.000Z" title="Created 2026-02-12 15:30:00">2026-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/02/09/15642-Machine-Learning-Systems/15642-ML-Systems-Transformer-Attention-Optimizations/" title="15642 Machine Learning Systems: Transformer, Attention, and Optimizations"><img src="https://raw.githubusercontent.com/XLOverflow/blog-image/main/20260122210733236.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="15642 Machine Learning Systems: Transformer, Attention, and Optimizations"/></a><div class="content"><a class="title" href="/2026/02/09/15642-Machine-Learning-Systems/15642-ML-Systems-Transformer-Attention-Optimizations/" title="15642 Machine Learning Systems: Transformer, Attention, and Optimizations">15642 Machine Learning Systems: Transformer, Attention, and Optimizations</a><time datetime="2026-02-09T19:30:00.000Z" title="Created 2026-02-09 14:30:00">2026-02-09</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By Xiang Li</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: 'fb37ffde539166b338d8',
      clientSecret: '00c01014243d312219aa68b6a2e22f7f19f4c8ef',
      repo: 'blog-comments',
      owner: 'XLOverflow',
      admin: ['XLOverflow'],
      updateCountCallback: commentCount,
      ...option,
      id: isShuoshuo ? path : (option && option.id) || '31652ae9cf118157e55ca2ef99a68492'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await btf.getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !true) {
    if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>